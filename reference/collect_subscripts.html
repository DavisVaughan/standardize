<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Standardize subscripts — collect_subscripts • standardize</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Standardize subscripts — collect_subscripts" />
<meta property="og:description" content="collect_subscripts() standardizes subscripts to make it easier to
develop [ methods, especially for data frame and array subsetting.
It helps with a number of things, including:
Counting the number of subscript arguments supplied.
Transforming implicit missing subscripts into explicit NULL values.
Optional support for capturing ... and drop.
Optional support for standardizing the data frame column subsetting
behavior of x[i] into x[,j].


collect_subscripts() can only be called from inside of a function.
Calling collect_subscripts() in the console directly will result in
an error.
The expected way to use collect_subscripts() is as the first line of
a [ method. You'll collect the processed subscripts, and then use
them to slice the input accordingly." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">standardize</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DavisVaughan/standardize/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Standardize subscripts</h1>
    <small class="dont-index">Source: <a href='https://github.com/DavisVaughan/standardize/blob/master/R/collect-subscripts.R'><code>R/collect-subscripts.R</code></a></small>
    <div class="hidden name"><code>collect_subscripts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>collect_subscripts()</code> standardizes subscripts to make it easier to
develop <code>[</code> methods, especially for data frame and array subsetting.
It helps with a number of things, including:</p><ul>
<li><p>Counting the number of subscript arguments supplied.</p></li>
<li><p>Transforming implicit missing subscripts into explicit <code>NULL</code> values.</p></li>
<li><p>Optional support for capturing <code>...</code> and <code>drop</code>.</p></li>
<li><p>Optional support for standardizing the data frame column subsetting
behavior of <code>x[i]</code> into <code>x[,j]</code>.</p></li>
</ul>

<p><code>collect_subscripts()</code> can <strong>only</strong> be called from inside of a function.
Calling <code>collect_subscripts()</code> in the console directly will result in
an error.</p>
<p>The expected way to use <code>collect_subscripts()</code> is as the first line of
a <code>[</code> method. You'll collect the processed subscripts, and then use
them to slice the input accordingly.</p>
    </div>

    <pre class="usage"><span class='fu'>collect_subscripts</span>(<span class='no'>i</span>, <span class='no'>j</span>, <span class='no'>...</span>, <span class='kw'>drop</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>column_transform</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>i, j</th>
      <td><p><code>[vector]</code></p>
<p>Required vectors of subscripts.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p><code>[dots]</code></p>
<p>Optional additional subscripts for subsetting into higher dimensions. Names
are preserved. Implicit missing subscripts are transformed into explicit
<code>NULL</code> values.</p>
<p>If no <code>...</code> are provided, the return value will contain an empty list
in the <code>$dots</code> slot.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p><code>[NULL / logical(1)]</code></p>
<p>Optional argument to capture <code>drop</code>. If your <code>[</code> method signature
doesn't include a <code>drop</code> argument, don't supply this argument. If
it does, it is required that <code>drop</code> has a default value in your method. It
is recommended to default this to <code>drop = FALSE</code> in your method.</p></td>
    </tr>
    <tr>
      <th>column_transform</th>
      <td><p><code>[logical(1)]</code></p>
<p>Should a single <code>i</code> argument represent column subsetting? For example,
this standardizes <code>x[i]</code> to <code>x[,j]</code>. This is useful when creating data
frame <code>[</code> methods, but array subsetting likely won't use this feature.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A named list of the following 6 elements containing information about the
standardized subscripts.</p><ul>
<li><p><code>i</code>: The standardized <code>i</code> subscript. If <code>NULL</code>, <code>i</code> is considered to be
missing.</p></li>
<li><p><code>j</code>: The standardized <code>j</code> subscript. If <code>NULL</code>, <code>j</code> is considered to be
missing.</p></li>
<li><p><code>dots</code>: A list of the standardized <code>...</code> subscripts. If no <code>...</code> are
supplied, an empty list is returned. If <code>...</code> are supplied and any
subscripts are missing, <code>NULL</code> values are returned in those locations.
For example, <code>x[i, j, , k]</code> would return a list of <code><a href='https://rdrr.io/r/base/list.html'>list(NULL, k)</a></code>.</p></li>
<li><p><code>drop</code>: The standardized <code>drop</code> argument. If <code>drop</code> is not provided,
this is <code>NULL</code>.</p></li>
<li><p><code>n_args</code>: The total number of subscript-related arguments supplied. This
includes all arguments in the <code>[</code> call <em>except</em> for the object being
subset, <code>x</code>. Missing arguments are counted here. For example, <code>x[1,]</code>
has a <code>n_args</code> value of <code>2</code> because <code>i</code> is supplied and <code>j</code> is supplied
but missing. On the other hand, <code>x[i]</code> has a <code>n_args</code> value of <code>1</code>.</p></li>
<li><p><code>n_subscripts</code>: The total number of subscript arguments supplied. This
counts <code>i</code>, <code>j</code>, and <code>...</code> arguments. It is only different drop <code>n_args</code>
if <code>drop</code> is directly supplied by the end user.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When counting arguments, <code>collect_subscripts()</code> assumes that 1 argument
is reserved for <code>x</code> and will subtract it from the total number of arguments.
If you are implementing a <code>[</code> method, this is automatically enforced by the
method signature. If you are calling <code>collect_subscripts()</code> from somewhere
else, keep this in mind when inspecting the results.</p>
<p>If <code>NULL</code> is provided as a subscript, it is standardized to <code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code> to
prevent confusion with <code>NULL</code> values in the resulting info list. A <code>NULL</code>
subscript should have the same meaning as <code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Generally you would replace `slicer()` with your `[.myclass` method,</span>
<span class='co'># which you would then call as `x[i]`. This just collects the subscript info</span>
<span class='co'># and returns a compact view of it. Normally you would use the processed</span>
<span class='co'># results to slice `x`.</span>

<span class='no'>slicer</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>i</span>, <span class='no'>j</span>, <span class='no'>...</span>, <span class='no'>drop</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) {
  <span class='no'>info</span> <span class='kw'>&lt;-</span> <span class='fu'>collect_subscripts</span>(<span class='no'>i</span>, <span class='no'>j</span>, <span class='no'>...</span>, <span class='kw'>drop</span> <span class='kw'>=</span> <span class='no'>drop</span>)
  <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span>(<span class='no'>info</span>)
}

<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='st'>"a"</span>

<span class='co'># Standardize an easy case</span>
<span class='fu'>slicer</span>(<span class='no'>x</span>, <span class='fl'>1</span>:<span class='fl'>5</span>, <span class='fl'>2</span>)</div><div class='output co'>#&gt; List of 6
#&gt;  $ i           : int [1:5] 1 2 3 4 5
#&gt;  $ j           : num 2
#&gt;  $ dots        : list()
#&gt;  $ drop        : logi FALSE
#&gt;  $ n_args      : int 2
#&gt;  $ n_subscripts: int 2</div><div class='input'>
<span class='co'># By default, supplying just `i` standardizes `x[i]` to `x[,j]`</span>
<span class='fu'>slicer</span>(<span class='no'>x</span>, <span class='fl'>1</span>)</div><div class='output co'>#&gt; List of 6
#&gt;  $ i           : NULL
#&gt;  $ j           : num 1
#&gt;  $ dots        : list()
#&gt;  $ drop        : logi FALSE
#&gt;  $ n_args      : int 1
#&gt;  $ n_subscripts: int 1</div><div class='input'>
<span class='co'># With just `j`, the implicit missing `i` value is returned as a `NULL`.</span>
<span class='co'># Note that while `i` and `j` are the same for this and `slicer(x, 1)`,</span>
<span class='co'># the `n_*` counters are different.</span>
<span class='fu'>slicer</span>(<span class='no'>x</span>, , <span class='fl'>1</span>)</div><div class='output co'>#&gt; List of 6
#&gt;  $ i           : NULL
#&gt;  $ j           : num 1
#&gt;  $ dots        : list()
#&gt;  $ drop        : logi FALSE
#&gt;  $ n_args      : int 2
#&gt;  $ n_subscripts: int 2</div><div class='input'>
<span class='co'># This would be equivalent to calling `x[]`</span>
<span class='fu'>slicer</span>(<span class='no'>x</span>, )</div><div class='output co'>#&gt; List of 6
#&gt;  $ i           : NULL
#&gt;  $ j           : NULL
#&gt;  $ dots        : list()
#&gt;  $ drop        : logi FALSE
#&gt;  $ n_args      : int 1
#&gt;  $ n_subscripts: int 1</div><div class='input'>
<span class='co'># Extra `...` are standardized too. Again, implicit dimensions are returned</span>
<span class='co'># as `NULL`.</span>
<span class='fu'>slicer</span>(<span class='no'>x</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>)</div><div class='output co'>#&gt; List of 6
#&gt;  $ i           : num 1
#&gt;  $ j           : num 2
#&gt;  $ dots        :List of 1
#&gt;   ..$ : num 3
#&gt;  $ drop        : logi FALSE
#&gt;  $ n_args      : int 3
#&gt;  $ n_subscripts: int 3</div><div class='input'>
<span class='fu'>slicer</span>(<span class='no'>x</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, , <span class='fl'>3</span>)</div><div class='output co'>#&gt; List of 6
#&gt;  $ i           : num 1
#&gt;  $ j           : num 2
#&gt;  $ dots        :List of 2
#&gt;   ..$ : NULL
#&gt;   ..$ : num 3
#&gt;  $ drop        : logi FALSE
#&gt;  $ n_args      : int 4
#&gt;  $ n_subscripts: int 4</div><div class='input'>

<span class='co'># You don't have to supply `...` and `drop` if you don't need it. This</span>
<span class='co'># won't be as useful because it isn't as complex to count here, but it</span>
<span class='co'># will still standardize `x[i]`, which is nice.</span>
<span class='no'>slicer_simple</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>i</span>, <span class='no'>j</span>) {
  <span class='fu'>collect_subscripts</span>(<span class='no'>i</span>, <span class='no'>j</span>)
}

<span class='co'># Note that `drop` is returned as `NULL` here, since it isn't in your</span>
<span class='co'># function signature.</span>
<span class='fu'>slicer_simple</span>(<span class='no'>x</span>, <span class='fl'>1</span>)</div><div class='output co'>#&gt; $i
#&gt; NULL
#&gt; 
#&gt; $j
#&gt; [1] 1
#&gt; 
#&gt; $dots
#&gt; list()
#&gt; 
#&gt; $drop
#&gt; NULL
#&gt; 
#&gt; $n_args
#&gt; [1] 1
#&gt; 
#&gt; $n_subscripts
#&gt; [1] 1
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


